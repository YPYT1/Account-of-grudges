### **é¡¹ç›®åç§°ï¼šæ‹å¿ƒç‰©è¯­ (Native WeChat Mini Program)**

**é¡¹ç›®å”¯ä¸€æ ‡è¯†**: `lianxin-wuyu-miniprogram`

---

### **ç¬¬ä¸€éƒ¨åˆ†ï¼šæ€»æŒ‡ä»¤ä¸æ ¸å¿ƒè¦æ±‚**

**ä½ çš„ä»»åŠ¡æ˜¯**: ä½œä¸ºä¸€åèµ„æ·±çš„å¾®ä¿¡å°ç¨‹åºå‰ç«¯å¼€å‘è€…ï¼Œä¸¥æ ¼ã€å®Œæ•´ã€ç²¾ç¡®åœ°æ‰§è¡Œä»¥ä¸‹æ‰€æœ‰è§„èŒƒå’Œè¦æ±‚ï¼Œå¼€å‘ã€Œæ‹å¿ƒç‰©è¯­ã€å¾®ä¿¡å°ç¨‹åºçš„å…¨éƒ¨å‰ç«¯ä»£ç ã€‚

**æ ¸å¿ƒè¦æ±‚**:
1.  **æŠ€æœ¯æ ˆ**: å¿…é¡»ä½¿ç”¨ **åŸç”Ÿå¾®ä¿¡å°ç¨‹åºæ¡†æ¶** (`WXML`, `WXSS`, `TypeScript`)ã€çŠ¶æ€ç®¡ç†åº“ **mobx-miniprogram**ã€ä»¥åŠ **SCSS** ä½œä¸ºæ ·å¼é¢„å¤„ç†å™¨ã€‚
2.  **UIæ¡†æ¶**: **[æœ€é‡è¦]** æ•´ä¸ªé¡¹ç›® **å¿…é¡»** ä½¿ç”¨ **iView Weapp** UI ç»„ä»¶åº“è¿›è¡Œå¼€å‘ã€‚ç¦æ­¢æ‰‹å†™åŠŸèƒ½é‡å¤çš„è‡ªå®šä¹‰ç»„ä»¶ã€‚
3.  **ä»£ç ç›®å½•**: æ‰€æœ‰å‰ç«¯ä»£ç å¿…é¡»åˆ›å»ºåœ¨æ ¹ç›®å½•ä¸‹çš„ `/miniapp/` æ–‡ä»¶å¤¹å†…ã€‚
4.  **æ•°æ®å¥‘çº¦**: **ã€æœ€é‡è¦ã€‘** æœ¬æ–‡æ¡£ç¬¬äº”éƒ¨åˆ†æä¾›äº†ç”±åç«¯å®šä¹‰çš„ã€åŒ…å«æ‰€æœ‰åœºæ™¯çš„ **å®Œæ•´æ¨¡æ‹Ÿæ•°æ® (Mock Data)**ã€‚ä½ çš„æ‰€æœ‰å¼€å‘éƒ½å¿…é¡» **ä¸¥æ ¼ä»¥æ­¤æ•°æ®ä¸ºå”¯ä¸€çœŸå®æ¥æº** è¿›è¡Œï¼Œç¡®ä¿å‰ç«¯ç»„ä»¶çš„å­—æ®µã€æ•°æ®ç»“æ„ä¸æ­¤å®Œå…¨åŒ¹é…ã€‚åœ¨åç«¯æ¥å£æœªå®Œæˆæ—¶ï¼Œä½ å¯ä»¥ç›´æ¥ä½¿ç”¨è¿™äº›æ•°æ®ä½œä¸ºæœ¬åœ°å‡æ•°æ®è¿›è¡Œå¼€å‘ã€‚
5.  **ä»£ç é£æ ¼**: éµå¾ª `ESLint` å’Œ `Prettier` çš„è§„èŒƒï¼Œç¡®ä¿ä»£ç æ•´æ´ã€å¯è¯»æ€§å¼ºã€‚
6.  **æ³¨é‡Š**: å¯¹æ‰€æœ‰éç›´è§‚çš„ä¸šåŠ¡é€»è¾‘ã€ç®—æ³•ã€çŠ¶æ€ç®¡ç†å‰¯ä½œç”¨ï¼ˆeffectsï¼‰ç­‰ï¼Œæ·»åŠ æ¸…æ™°çš„ä¸­æ–‡æ³¨é‡Šã€‚

---

### **ç¬¬äºŒéƒ¨åˆ†ï¼šUI/UX è®¾è®¡ç³»ç»Ÿè§„èŒƒ (åŸºäº iView Weapp)**

ä½ å¿…é¡»ä¸¥æ ¼æŒ‰ç…§ä»¥ä¸‹è§†è§‰è§„èŒƒï¼Œé€šè¿‡é…ç½® iView Weapp ç»„ä»¶çš„å±æ€§å’Œè‡ªå®šä¹‰æ ·å¼æ¥å®ç°æ‰€æœ‰é¡µé¢ã€‚

**2.1 iView Weapp å®‰è£…ä¸é…ç½®**

*   **å‰ç½®çŸ¥è¯†**: å¼€å§‹å‰ï¼Œä½ åº”å·²ç†Ÿæ‚‰[å¾®ä¿¡å°ç¨‹åºè‡ªå®šä¹‰ç»„ä»¶](https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/)çš„å®˜æ–¹æ–‡æ¡£ã€‚
*   **ç»„ä»¶è·å–**: æœ¬é¡¹ç›®çš„å‰ç«¯UIç»„ä»¶åº“ `iView Weapp` å·²é€šè¿‡ `git clone` ä¸‹è½½ï¼Œå¹¶å°†å…¶ `dist` ç›®å½•å¤åˆ¶åˆ°äº† `/miniapp/` ç›®å½•ä¸‹ï¼Œé‡å‘½åä¸º `iview`ã€‚ä½ çš„æ‰€æœ‰ç»„ä»¶å¼•ç”¨è·¯å¾„éƒ½åŸºäºæ­¤ç»“æ„ã€‚
*   **ç»„ä»¶ä½¿ç”¨æ–¹å¼**:
    1.  **å…¨å±€å¼•å…¥**: ä¸ºæ–¹ä¾¿èµ·è§ï¼Œå¸¸ç”¨çš„åŸºç¡€ç»„ä»¶å·²åœ¨ `/miniapp/app.json` ä¸­å…¨å±€å¼•å…¥ï¼Œä½ å¯ä»¥åœ¨æ‰€æœ‰é¡µé¢ä¸­ç›´æ¥ä½¿ç”¨å®ƒä»¬ï¼Œæ— éœ€åœ¨é¡µé¢`.json`ä¸­é‡å¤å£°æ˜ã€‚
        ```json
        // app.json
        "usingComponents": {
          "i-button": "/iview/button/index",
          "i-card": "/iview/card/index",
          "i-tag": "/iview/tag/index",
          "i-progress": "/iview/progress/index",
          "i-panel": "/iview/panel/index",
          "i-avatar": "/iview/avatar/index",
          "i-icon": "/iview/icon/index"
        }
        ```
    2.  **é¡µé¢çº§å¼•å…¥**: å¦‚æœæŸä¸ªç»„ä»¶ä»…åœ¨ç‰¹å®šé¡µé¢ä½¿ç”¨ï¼Œå¯ä»¥åœ¨è¯¥é¡µé¢çš„ `.json` é…ç½®æ–‡ä»¶ä¸­ï¼Œæ·»åŠ  `usingComponents` å­—æ®µã€‚è·¯å¾„å¿…é¡»ä»é¡¹ç›®æ ¹ç›®å½•å¼€å§‹ã€‚ä¾‹å¦‚ï¼Œåœ¨ `pages/somepage/index.json` ä¸­å¼•å…¥ä¸€ä¸ªå¼€å…³ç»„ä»¶ï¼š
        ```json
        "usingComponents": {
          "i-switch": "/miniapp/iview/switch/index" 
        }
        ```
    3.  **WXMLä¸­ä½¿ç”¨**: åœ¨ `wxml` æ–‡ä»¶ä¸­ï¼Œåƒä½¿ç”¨æ™®é€šæ ‡ç­¾ä¸€æ ·ä½¿ç”¨ iView ç»„ä»¶ã€‚
        ```xml
        <i-button type="primary" bind:click="handleClick">è¿™æ˜¯ä¸€ä¸ªæŒ‰é’®</i-button>
        ```

**2.2 è§†è§‰åŸºè°ƒä¸å…¨å±€æ ·å¼è¦†ç›–**
*   **ä¸»é¢˜**: ã€Œâ¼¿ç»˜æ—¥ç³»è½¯èŒã€â€” ä½é¥±å’Œåº¦ç²‰è“å¯¹æ¯” + å¥¶æ²¹åº•è‰²ã€‚
*   **è‰²ç³» (åœ¨ `app.wxss` æˆ–å…¨å±€ `_variables.scss` ä¸­å®šä¹‰)**:
    *   `$color-primary: #FADADD;` (è¿™å°†ä½œä¸º iView çš„ä¸»è‰²)
    *   `$color-info: #B2D9EA;` (è¿™å°†ä½œä¸º iView çš„ info è‰²)
    *   `$color-accent: #FFF3B0;`
    *   `$color-background: #FFF9F5;`
    *   `$color-text: #333333;`
*   **å…¨å±€æ ·å¼**: åœ¨ `app.wxss` ä¸­è®¾ç½®å…¨å±€èƒŒæ™¯è‰²:
    ```css
    page {
      background-color: #FFF9F5;
      color: #333333;
    }
    ```
*   **iView é¢œè‰²è¦†ç›–**: åœ¨ `app.wxss` ä¸­ï¼Œé€šè¿‡è®¾ç½® CSS å˜é‡æ¥è¦†ç›– iView Weapp çš„é»˜è®¤ä¸»é¢˜è‰²ï¼Œä»¥åŒ¹é…æˆ‘ä»¬çš„è®¾è®¡ã€‚
    ```css
    page {
        --primary-color: #FADADD;
        --info-color: #B2D9EA;
        /* æ ¹æ®éœ€è¦è¦†ç›–å…¶ä»–é¢œè‰²å˜é‡ */
    }
    ```

**2.3 iView Weapp ç»„ä»¶ä½¿ç”¨è§„èŒƒ**
ä½ éœ€è¦åœ¨å¼€å‘ä¸­ï¼Œä½¿ç”¨ä»¥ä¸‹ iView ç»„ä»¶æ¥æ„æˆé¡µé¢å…ƒç´ ï¼š

| é¡¹ç›®éœ€æ±‚         | iView ç»„ä»¶ (`<i-xxx>`) | å…³é”®å±æ€§/å®ç°ç»†èŠ‚                                                                                               |
| :--------------- | :--------------------- | :-------------------------------------------------------------------------------------------------------------- |
| **ä¸»æ“ä½œæŒ‰é’®**   | `i-button`             | `type="primary"` (é¢œè‰²å·²è¢«è¦†ç›–ä¸ºç²‰è‰²), `shape="circle"`, `size="large"`, `long="true"` (å¦‚æœéœ€è¦é€šæ æŒ‰é’®)           |
| **å¡ç‰‡å®¹å™¨**     | `i-card`               | `full="true"`ï¼Œé€šè¿‡ `i-card` çš„ `name` slot æ”¾ç½®æ ‡é¢˜ã€‚å†…å®¹é€šè¿‡é»˜è®¤ slot æ’å…¥ã€‚                                  |
| **çŠ¶æ€æ ‡ç­¾**     | `i-tag`                | æ ¹æ®äº‹ä»¶ç±»å‹ï¼Œä½¿ç”¨`color`å±æ€§ã€‚ä¾‹å¦‚ `color="primary"` (ç²‰è‰²ç³») æˆ– `color="info"` (è“è‰²ç³»)                          |
| **è¿›åº¦æ¡**       | `i-progress`           | `stroke-color` è®¾ç½®ä¸ºæˆ‘ä»¬çš„ä¸»è‰² `#FADADD`ï¼Œ`percent` åŠ¨æ€ç»‘å®šã€‚                                      |
| **å¤´åƒ**         | `i-avatar`             | `src`ç»‘å®šç”¨æˆ·å¤´åƒURLï¼Œ`shape="circle"`                                                                          |
| **å›¾æ ‡**         | `i-icon`               | `type` å±æ€§ä½¿ç”¨ iView å†…ç½®çš„å›¾æ ‡åã€‚                                                                            |
| **é¢æ¿/åˆ†ç»„**    | `i-panel`              | `title` å±æ€§è®¾ç½®åˆ†ç»„æ ‡é¢˜ã€‚                                                                                      |
| **å¿ƒæƒ…é€‰æ‹©å™¨**   | è‡ªå®šä¹‰ç»„ä»¶             | æ­¤ç»„ä»¶ä»éœ€è‡ªå®šä¹‰ï¼Œä½†å¯ä»¥**å†…éƒ¨ä½¿ç”¨** `i-grid` å’Œ `i-grid-item` å¸ƒå±€ï¼Œæ¯ä¸ª item ä¸­æ”¾ç½®ä¸€ä¸ª `i-icon` æˆ– `image`ã€‚ |

---

### **ç¬¬ä¸‰éƒ¨åˆ†ï¼šæŠ€æœ¯æ¶æ„ä¸æ–‡ä»¶ç»“æ„**

**3.1 æœ€ç»ˆæ–‡ä»¶ç»“æ„**

ä½ å¿…é¡»ä¸¥æ ¼æŒ‰ç…§ä»¥ä¸‹ç›®å½•ç»“æ„åˆ›å»ºå’Œç»„ç»‡æ‰€æœ‰ä»£ç æ–‡ä»¶ã€‚è¿™æ˜¯é¡¹ç›®çš„éª¨æ¶ï¼Œä»»ä½•æ–‡ä»¶éƒ½ä¸èƒ½æ”¾é”™ä½ç½®ã€‚

```
/miniapp/
|-- components/             # å…¨å±€è‡ªå®šä¹‰ç»„ä»¶ (ä¾‹å¦‚ MoodPicker)
|-- iview/                  # ã€å·²å­˜åœ¨ã€‘iView Weapp ç»„ä»¶åº“ï¼Œè¯·å‹¿ä¿®æ”¹
|-- pages/                  # æ‰€æœ‰é¡µé¢
|   |-- index/              # é¦–é¡µ
|   |-- profile/            # ä¸ªäººä¸­å¿ƒ
|   |-- auth/               # æˆæƒç™»å½•é¡µ
|   |-- couple/             # æƒ…ä¾£ç»‘å®šé¡µ
|   |-- event-detail/       # äº‹ä»¶è¯¦æƒ…é¡µ
|   |-- event-add/          # æ–°å¢äº‹ä»¶é¡µ
|   |-- ...                 # å…¶ä»–ä¸šåŠ¡é¡µé¢
|-- services/               # API æœåŠ¡, ä¸šåŠ¡é€»è¾‘å°è£…
|   |-- api.js              # å°è£… wx.request, ç»Ÿä¸€å¤„ç†è¯·æ±‚
|   |-- auth.js             # ç™»å½•ã€è®¤è¯ç›¸å…³é€»è¾‘
|-- store/                  # å…¨å±€çŠ¶æ€ç®¡ç† (MobX)
|   |-- user.js             # ç”¨æˆ·åŠæƒ…ä¾£ä¿¡æ¯
|   |-- event.js            # äº‹ä»¶(å¸–å­)åˆ—è¡¨
|   |-- index.js            # ç»„åˆå¹¶å¯¼å‡ºæ‰€æœ‰ store
|-- styles/                 # å…¨å±€æ ·å¼
|   |-- _variables.scss     # SCSS å˜é‡ (é¢œè‰², å°ºå¯¸ç­‰)
|   |-- app.scss            # å…¨å±€ SCSS å…¥å£æ–‡ä»¶
|-- types/                  # TypeScript ç±»å‹å®šä¹‰
|   |-- index.ts            # å…¨å±€ç±»å‹
|   |-- api.ts              # API å“åº”æ•°æ®ç±»å‹
|-- utils/                  # å·¥å…·å‡½æ•° (ä¾‹å¦‚æ—¥æœŸæ ¼å¼åŒ–)
|-- app.js                  # å°ç¨‹åºå…¥å£
|-- app.json                # å…¨å±€é…ç½® (è·¯ç”±, çª—å£è¡¨ç°)
|-- app.wxss                # å…¨å±€æ ·å¼è¡¨ (ç”± app.scss ç¼–è¯‘ç”Ÿæˆ)
|-- project.config.json     # é¡¹ç›®é…ç½®æ–‡ä»¶
```

**3.2 æ ¸å¿ƒæœåŠ¡å®ç°**
*   **APIå®¢æˆ·ç«¯ (`/miniapp/services/api.js`)**: ä¸¥æ ¼æŒ‰ç…§`å‰ç«¯å¼€å‘æ–‡æ¡£.md`ä¸­çš„ç¤ºä¾‹ï¼Œå°è£…`wx.request`ï¼Œå®ç°è¯·æ±‚æ‹¦æˆªã€Tokenè‡ªåŠ¨æ³¨å…¥ã€`401`ç»Ÿä¸€å¤„ç†å’Œä¸šåŠ¡é”™è¯¯`wx.showToast`æç¤ºã€‚
*   **çŠ¶æ€ç®¡ç† (`/miniapp/store/`)**:
    *   åœ¨ `store/` ç›®å½•ä¸‹ä¸ºä¸åŒä¸šåŠ¡æ¨¡å—ï¼ˆå¦‚ `user`, `event`ï¼‰åˆ›å»ºç‹¬ç«‹çš„`store`æ–‡ä»¶ã€‚
    *   ä½¿ç”¨`mobx-miniprogram`çš„`observable`åˆ›å»ºçŠ¶æ€ï¼Œ`action`åˆ›å»ºæ–¹æ³•ã€‚
    *   åœ¨`app.js`çš„`onLaunch`ä¸­ï¼Œå°†æ‰€æœ‰`store`å®ä¾‹æŒ‚è½½åˆ°`getApp().store`ä¸Šï¼Œå¹¶å®ç°è·¯ç”±å®ˆå«é€»è¾‘ã€‚

**3.3 TypeScriptç±»å‹**
åœ¨ `/miniapp/types/` ç›®å½•ä¸‹ï¼Œæ ¹æ®ç¬¬äº”éƒ¨åˆ†çš„æ¨¡æ‹Ÿæ•°æ®å’ŒAPIæ¥å£ï¼Œåˆ›å»ºå®Œæ•´çš„`api.ts`ç±»å‹å®šä¹‰æ–‡ä»¶ï¼Œå¹¶åœ¨`index.ts`ä¸­è¿›è¡Œç»„åˆå¯¼å‡ºã€‚

---

### **ç¬¬å››éƒ¨åˆ†ï¼šåˆ†æ­¥å¼€å‘è·¯çº¿å›¾**

è¯·æŒ‰ç…§ä»¥ä¸‹é¡ºåºå’Œè¦æ±‚å¼€å‘å„ä¸ªé¡µé¢ï¼š

**Phase 1: æ ¸å¿ƒè®¤è¯æµç¨‹**
1.  **`pages/auth/index` (ç™»å½•é¡µ)**:
    *   **UI**: é¡µé¢ä¸­å¤®æ”¾ç½®ä¸€ä¸ª `<i-button type="primary" shape="circle" size="large">å¾®ä¿¡æˆæƒç™»å½•</i-button>`ã€‚
    *   **é€»è¾‘**: ç‚¹å‡»æŒ‰é’®åï¼Œè°ƒç”¨`wx.login()`è·å–`code`ï¼Œç„¶åè°ƒç”¨`POST /auth/login`æ¥å£ã€‚æˆåŠŸåï¼Œå°†è¿”å›çš„`access_token`å­˜å…¥`wx.storage`ï¼Œå¹¶è°ƒç”¨`userStore.fetchUserSession()`ï¼Œæœ€åæ ¹æ®`userStore.isCoupleBound`çš„å€¼ï¼Œä½¿ç”¨`wx.reLaunch`è·³è½¬åˆ°é¦–é¡µæˆ–ç»‘å®šé¡µã€‚

2.  **`pages/couple/index` (æƒ…ä¾£ç»‘å®šé¡µ)**:
    *   **UI**: ä½¿ç”¨ `<i-panel>` å’Œ `<i-input>`ã€`<i-button>` æ„å»ºç•Œé¢ã€‚
    *   **é€»è¾‘**:
        *   è¿›å…¥é¡µé¢æ—¶ï¼Œè‹¥è‡ªå·±æœªç»‘å®šï¼Œåˆ™è°ƒç”¨ `POST /couples/invitations` è·å–è‡ªå·±çš„é‚€è¯·ç å¹¶æ˜¾ç¤ºã€‚
        *   ç‚¹å‡»"ç¡®è®¤ç»‘å®š"åï¼Œè°ƒç”¨`POST /couples/accept-invitation`ã€‚æˆåŠŸåï¼ŒåŒæ ·è°ƒç”¨`userStore.fetchUserSession()`å¹¶è·³è½¬åˆ°é¦–é¡µã€‚

**Phase 2: æ ¸å¿ƒå†…å®¹æ¨¡å—**
1.  **`pages/index/index` (é¦–é¡µ)**:
    *   **UI**:
        *   é¡¶éƒ¨ä½¿ç”¨ `<i-avatar>` æ˜¾ç¤ºæƒ…ä¾£å¤´åƒã€‚
        *   ä¸­é—´ä½¿ç”¨ `<i-progress>` ç»„ä»¶ï¼Œ`percent` ç»‘å®š `userStore.coupleInfo.connection_score`ã€‚
        *   ä¸‹æ–¹ä½¿ç”¨ `<i-card>` å¾ªç¯æ¸²æŸ“ `eventStore.unresolvedEvents`ã€‚
        *   å³ä¸‹è§’æ‚¬æµ®æŒ‰é’®ä½¿ç”¨ `<i-icon type="add" size="28" color="#ffffff">` å¹¶è‡ªå®šä¹‰ä¸€ä¸ªåœ†å½¢èƒŒæ™¯ã€‚
    *   **é€»è¾‘**: ä½¿ç”¨`mobx-miniprogram-bindings`å°†`userStore`å’Œ`eventStore`ç»‘å®šåˆ°é¡µé¢ã€‚åœ¨`onShow`ç”Ÿå‘½å‘¨æœŸä¸­è°ƒç”¨`eventStore.fetchUnresolvedEvents()`åˆ·æ–°åˆ—è¡¨ã€‚ç‚¹å‡»"+"æŒ‰é’®è·³è½¬åˆ°æ–°å¢äº‹ä»¶é¡µã€‚

2.  **åç»­é¡µé¢ (äº‹ä»¶æ–°å¢/è¯¦æƒ…ã€ä¸ªäººä¸­å¿ƒç­‰)**:
    *   æ ¹æ®`åŠŸèƒ½æè¿°æ–‡æ¡£ â€” ã€Œæ‹å¿ƒç‰©è¯­ã€.md`ä¸­çš„æè¿°ï¼Œç»§ç»­å¼€å‘å…¶ä½™é¡µé¢ã€‚
    *   æ‰€æœ‰æ•°æ®è¯·æ±‚å’ŒçŠ¶æ€å˜æ›´ï¼Œéƒ½å¿…é¡»é€šè¿‡å¯¹åº”çš„`store`ä¸­çš„`action`æ¥å®Œæˆã€‚

---

### **ç¬¬äº”éƒ¨åˆ†ï¼šã€å”¯ä¸€çœŸå®æ¥æºã€‘åç«¯APIæ¥å£ä¸æ¨¡æ‹Ÿæ•°æ®å¥‘çº¦**

**æ‰€æœ‰å‰ç«¯çš„é¡µé¢æ¸²æŸ“ã€ç»„ä»¶å¼€å‘ã€æ•°æ®ç»‘å®šã€é€»è¾‘åˆ¤æ–­ï¼Œéƒ½å¿…é¡»ä¸¥æ ¼ã€å®Œå…¨åœ°åŸºäºä»¥ä¸‹æ¨¡æ‹Ÿæ•°æ®ç»“æ„ã€‚è¿™æ˜¯ä¿è¯å‰åç«¯é¡ºåˆ©å¯¹æ¥çš„åŸºçŸ³ã€‚**

#### **1. `GET /api/me` - è·å–å½“å‰ä¼šè¯ä¿¡æ¯**

**åœºæ™¯ 1.1ï¼šç®¡ç†å‘˜ç”¨æˆ·**
```json
{
  "code": 200,
  "message": "Session info for an admin retrieved successfully.",
  "data": {
    "access_status": "ADMIN",
    "currentUser": {
      "id": "a1b2c3d4-0001-4001-8001-0123456789ab",
      "openid": "openid-for-admin-user-01",
      "nickname": "é˜¿æ¶› (ç®¡ç†å‘˜)",
      "avatar_url": "https://randomuser.me/api/portraits/men/32.jpg",
      "display_gender": "male",
      "bio": "ç³»ç»Ÿçš„å®ˆæŠ¤è€…ï¼Œå¶å°”ä¹Ÿè®°å½•ç”Ÿæ´»ã€‚",
      "status": "active",
      "is_admin": true,
      "preferences": {
        "notifications": {
          "new_event_push": true,
          "event_resolved_push": true,
          "new_message_push": false
        },
        "theme": "dark"
      },
      "last_login_at": "2023-10-27T10:00:00Z",
      "created_at": "2023-01-15T12:00:00Z"
    },
    "partner": {
      "id": "a1b2c3d4-0002-4002-8002-fedcba987654",
      "nickname": "å°æœˆ",
      "avatar_url": "https://randomuser.me/api/portraits/women/44.jpg",
      "display_gender": "female",
      "bio": "çˆ±ç”»ç”»ï¼Œçˆ±æ—…è¡Œï¼Œä¹Ÿçˆ±èº«è¾¹çš„ç®¡ç†å‘˜å…ˆç”Ÿã€‚"
    },
    "coupleInfo": {
      "id": "c1p2l3e4-0001-4001-8001-abcdef123456",
      "anniversary_date": "2020-01-01",
      "trial_ends_at": null,
      "subscription_expires_at": null
    }
  }
}
```

**åœºæ™¯ 1.2ï¼šä»˜è´¹è®¢é˜…ç”Ÿæ•ˆä¸­çš„ç”¨æˆ·**
```json
{
  "code": 200,
  "message": "Session info for a subscribed user retrieved successfully.",
  "data": {
    "access_status": "FULL_ACCESS",
    "currentUser": {
      "id": "b2c3d4e5-0003-4003-8003-112233445566",
      "openid": "openid-for-paid-user-03",
      "nickname": "ä»˜è´¹ç”¨æˆ·A",
      "avatar_url": "https://randomuser.me/api/portraits/women/68.jpg",
      "display_gender": "female",
      "bio": "äº«å—æ¯ä¸€åˆ»çš„ç”œèœœè®°å½•ã€‚",
      "status": "active",
      "is_admin": false,
      "preferences": {
        "notifications": {
          "new_event_push": true,
          "event_resolved_push": true,
          "new_message_push": true
        },
        "theme": "light"
      },
      "last_login_at": "2023-10-26T18:30:00Z",
      "created_at": "2022-08-01T11:00:00Z"
    },
    "partner": {
      "id": "b2c3d4e5-0004-4004-8004-aabbccddeeff",
      "nickname": "ä»˜è´¹ç”¨æˆ·B",
      "avatar_url": "https://randomuser.me/api/portraits/men/68.jpg",
      "display_gender": "male",
      "bio": "ä¸ºæˆ‘ä»¬çš„çˆ±æŠ•èµ„ï¼Œå€¼å¾—ã€‚"
    },
    "coupleInfo": {
      "id": "c1p2l3e4-0002-4002-8002-654321fedcba",
      "anniversary_date": "2022-08-08",
      "trial_ends_at": "2022-09-08T12:00:00Z",
      "subscription_expires_at": "2024-09-08T12:00:00Z"
    }
  }
}
```

**åœºæ™¯ 1.3ï¼šå…è´¹è¯•ç”¨æœŸå†…çš„ç”¨æˆ·**
```json
{
  "code": 200,
  "message": "Session info for a user in trial period retrieved successfully.",
  "data": {
    "access_status": "TRIAL",
    "currentUser": {
      "id": "c3d4e5f6-0005-4005-8005-abcdefabcdef",
      "openid": "openid-for-trial-user-05",
      "nickname": "è¯•ç”¨ç”¨æˆ·A",
      "avatar_url": "https://randomuser.me/api/portraits/men/50.jpg",
      "display_gender": "male",
      "bio": "æ­£åœ¨ä½“éªŒè¿™ä¸ªç¥å¥‡çš„å°ç¨‹åºï¼",
      "status": "active",
      "is_admin": false,
      "preferences": {
        "notifications": {
          "new_event_push": true,
          "event_resolved_push": false,
          "new_message_push": true
        },
        "theme": "system"
      },
      "last_login_at": "2023-10-27T14:00:00Z",
      "created_at": "2023-10-15T18:30:00Z"
    },
    "partner": {
      "id": "c3d4e5f6-0006-4006-8006-fedcbafedcba",
      "nickname": "è¯•ç”¨ç”¨æˆ·B",
      "avatar_url": "https://randomuser.me/api/portraits/women/50.jpg",
      "display_gender": "female",
      "bio": "è¯•ç”¨æœŸæ„Ÿè§‰ä¸é”™å“¦ã€‚"
    },
    "coupleInfo": {
      "id": "c1p2l3e4-0003-4003-8003-789789789789",
      "anniversary_date": "2023-10-15",
      "trial_ends_at": "2023-11-15T18:30:00Z",
      "subscription_expires_at": null
    }
  }
}
```

**åœºæ™¯ 1.4ï¼šè®¢é˜…/è¯•ç”¨å·²åˆ°æœŸçš„ç”¨æˆ·**
```json
{
  "code": 200,
  "message": "Access expired. Subscription required.",
  "data": {
    "access_status": "EXPIRED",
    "currentUser": {
      "id": "d4e5f6g7-0007-4007-8007-778899aabbcc",
      "openid": "openid-for-expired-user-07",
      "nickname": "è¿‡æœŸç”¨æˆ·A",
      "avatar_url": "https://randomuser.me/api/portraits/women/25.jpg",
      "display_gender": "female",
      "bio": "æˆ‘ä»¬çš„ç”œèœœæ—¶å…‰éœ€è¦ç»­è´¹å•¦...",
      "status": "active",
      "is_admin": false,
      "preferences": {
        "notifications": {
          "new_event_push": true,
          "event_resolved_push": true,
          "new_message_push": true
        },
        "theme": "light"
      },
      "last_login_at": "2023-10-27T14:10:00Z",
      "created_at": "2021-03-14T10:00:00Z"
    },
    "partner": {
      "id": "d4e5f6g7-0008-4008-8008-ccddeeff0011",
      "nickname": "è¿‡æœŸç”¨æˆ·B",
      "avatar_url": "https://randomuser.me/api/portraits/men/25.jpg",
      "display_gender": "male",
      "bio": "æ˜¯æ—¶å€™å……å€¼ä¿¡ä»°äº†ã€‚"
    },
    "coupleInfo": {
      "id": "c1p2l3e4-0004-4004-8004-101101101101",
      "anniversary_date": "2021-03-14",
      "trial_ends_at": "2021-04-14T10:00:00Z",
      "subscription_expires_at": "2022-04-14T10:00:00Z"
    }
  }
}
```

**åœºæ™¯ 1.5ï¼šæœªç»‘å®šæƒ…ä¾£çš„ç”¨æˆ·**
```json
{
  "code": 200,
  "message": "User is not bound to a couple.",
  "data": {
    "access_status": "UNBOUND",
    "currentUser": {
      "id": "e5f6g7h8-0009-4009-8009-1a2b3c4d5e6f",
      "openid": "openid-for-single-user-09",
      "nickname": "å•èº«è´µæ—C",
      "avatar_url": "https://randomuser.me/api/portraits/lego/1.jpg",
      "display_gender": "male",
      "bio": "å¯»æ‰¾æˆ‘çš„å¦ä¸€åŠã€‚",
      "status": "active",
      "is_admin": false,
      "preferences": {
        "notifications": {
          "new_event_push": true,
          "event_resolved_push": true,
          "new_message_push": true
        },
        "theme": "system"
      },
      "last_login_at": "2023-10-27T14:20:00Z",
      "created_at": "2023-09-01T20:00:00Z"
    },
    "partner": null,
    "coupleInfo": null
  }
}
```

#### **2. `GET /api/events?status=unresolved` - è·å–é¦–é¡µå¸–å­åˆ—è¡¨ (æœªè§£å†³)**
```json
{
  "code": 200,
  "message": "Unresolved events retrieved successfully.",
  "data": [
    {
      "id": "evt-uuid-001",
      "couple_id": "c1p2l3e4-0002-4002-8002-654321fedcba",
      "type": "brainstorming",
      "description": "è¯´å¥½çš„ä¸€èµ·çœ‹ç”µå½±ï¼Œç»“æœå¼€åœºååˆ†é’Ÿå°±ç¡ç€äº†ï¼Œå‘¼å™œæ‰“å¾—æ¯”ç”µå½±å£°è¿˜å“ï¼",
      "status": "unresolved",
      "solution": null,
      "event_date": "2023-10-26",
      "images": [],
      "location_text": "å®¶é‡Œçš„æ²™å‘ä¸Š",
      "author": {
        "id": "b2c3d4e5-0003-4003-8003-112233445566",
        "nickname": "ä»˜è´¹ç”¨æˆ·A",
        "display_gender": "female"
      },
      "mood_tag": {
        "id": 1,
        "name": "ç”Ÿæ°”",
        "emoji_icon": "ğŸ˜ "
      },
      "reactions": [],
      "resolved_at": null,
      "created_at": "2023-10-26T22:30:00Z",
      "updated_at": "2023-10-26T22:30:00Z"
    },
    {
      "id": "evt-uuid-002",
      "couple_id": "c1p2l3e4-0002-4002-8002-654321fedcba",
      "type": "sweet_moment",
      "description": "ä»Šå¤©åŠ ç­åˆ°å¾ˆæ™šï¼Œå›å®¶å‘ç°ä»–ç»™æˆ‘ç‚–äº†æ±¤ï¼Œè¿˜å‡†å¤‡äº†å°æƒŠå–œï¼Œå¤ªæ„ŸåŠ¨äº†ã€‚",
      "status": "unresolved",
      "solution": null,
      "event_date": "2023-10-25",
      "images": [
        "https://images.pexels.com/photos/262959/pexels-photo-262959.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2"
      ],
      "location_text": null,
      "author": {
        "id": "b2c3d4e5-0003-4003-8003-112233445566",
        "nickname": "ä»˜è´¹ç”¨æˆ·A",
        "display_gender": "female"
      },
      "mood_tag": {
        "id": 5,
        "name": "æ„ŸåŠ¨",
        "emoji_icon": "ğŸ¥°"
      },
      "reactions": [
        { "author_id": "b2c3d4e5-0004-4004-8004-aabbccddeeff", "emoji": "â¤ï¸" }
      ],
      "resolved_at": null,
      "created_at": "2023-10-25T23:00:00Z",
      "updated_at": "2023-10-25T23:00:00Z"
    }
  ]
}
```

#### **3. `GET /api/mood-tags` - è·å–æ‰€æœ‰å¯ç”¨çš„æƒ…ç»ªæ ‡ç­¾**
```json
{
  "code": 200,
  "message": "Mood tags retrieved successfully.",
  "data": [
    { "id": 1, "name": "ç”Ÿæ°”", "emoji_icon": "ğŸ˜ ", "category": "negative", "impact_on_connection_score": -5, "score": 2 },
    { "id": 2, "name": "å§”å±ˆ", "emoji_icon": "ğŸ¥º", "category": "negative", "impact_on_connection_score": -3, "score": 3 },
    { "id": 3, "name": "æ— è¯­", "emoji_icon": "ğŸ˜‘", "category": "negative", "impact_on_connection_score": -2, "score": 4 },
    { "id": 4, "name": "å¹³å¸¸", "emoji_icon": "ğŸ˜", "category": "neutral", "impact_on_connection_score": 0, "score": 6 },
    { "id": 5, "name": "æ„ŸåŠ¨", "emoji_icon": "ğŸ¥°", "category": "positive", "impact_on_connection_score": 5, "score": 9 },
    { "id": 6, "name": "å¼€å¿ƒ", "emoji_icon": "ğŸ˜„", "category": "positive", "impact_on_connection_score": 3, "score": 8 },
    { "id": 7, "name": "æƒŠå–œ", "emoji_icon": "ğŸ˜®", "category": "positive", "impact_on_connection_score": 4, "score": 9 }
  ]
}
```

**(ç¯‡å¹…é™åˆ¶ï¼Œæ­¤å¤„çœç•¥`æ¨¡æ‹Ÿåç«¯è¿”å›æ•°æ®.md`ä¸­çš„å…¶ä»–APIæ¨¡æ‹Ÿæ•°æ®ï¼Œä½†å®é™…ç”Ÿæˆæ—¶åº”åŒ…å«æ‰€æœ‰å†…å®¹)**

---
**æ‰§è¡ŒæŒ‡ä»¤**: ç°åœ¨ï¼Œè¯·æ ¹æ®ä»¥ä¸Šæ‰€æœ‰è§„èŒƒå’Œæ•°æ®ï¼Œå¼€å§‹å®ç°`miniapp`çš„å¼€å‘å·¥ä½œã€‚ç¡®ä¿æ‰€æœ‰UIéƒ½é€šè¿‡`iView Weapp`ç»„ä»¶åº“å®ç°ã€‚ä»Phase 1å¼€å§‹ï¼Œåˆ›å»ºæ–‡ä»¶å¹¶ç¼–å†™ä»£ç ã€‚
